<?php

namespace BL\Entity\Repository;

use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\Tools\Pagination\Paginator;

/**
 * InvoiceLineItemsRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class InvoiceLineItemsRepository extends EntityRepository {

    public function getLineItemsByInvoice($inv_id) {
        $q = $this->_em->createQuery("
	    SELECT partial t.{id, amount_due, amount_paid, check_number, payment_status, invoice_status, fiscal_year, description, quarter, created_at, updated_at},
                   partial u.{id, organization_name, first_name}
            FROM BL\Entity\InvoiceLineItems t
            JOIN t.client_id u
            WHERE t.invoice_id='{$inv_id}'");
        return $q->getResult();
    }

    /**
     * Function to
     * @author Masud
     * @copyright Blueliner Marketing
     * @version 0.1
     * @access public
     * @param <int> inv_id
     * @return String
     */
    public function getLineItemsForPDF($inv_id) {
        $q = $this->_em->createQuery("
            SELECT partial t.{id, amount_due, amount_paid, check_number, payment_status, invoice_status, fiscal_year, description, quarter, created_at, updated_at},
                   partial u.{id, organization_name, first_name}
            FROM BL\Entity\InvoiceLineItems t
            JOIN t.client_id u
            WHERE t.invoice_id='{$inv_id}'
       ");
        return $q->getResult();
    }

}