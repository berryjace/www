<?php

namespace BL\Entity\Repository;

use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\Tools\Pagination\Paginator;

/**
 * WhiteLabelRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class WhiteLabelRepository extends EntityRepository {

    /**
     * Function to get all the users with white labels id
     * @author Mahbub
     * @copyright Blueliner Marketing
     * @version 0.1
     * @access public
     * @return String
     */
    public function getClients() {
        $rsm = new \Doctrine\ORM\Query\ResultSetMapping;
        $rsm->addScalarResult('white_label_id', 'white_label_id');
        $rsm->addScalarResult('id', 'client_id');
        $rsm->addScalarResult('organization_name', 'organization_name');
        $query = $this->_em->createNativeQuery('select w.id as white_label_id,u.id,u.organization_name from white_label w right join users u on w.client_id=u.id where u.account_type='.ACC_TYPE_CLIENT.' order by u.organization_name', $rsm);
        return $query->getArrayResult();
    }

}